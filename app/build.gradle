plugins {
    id 'com.android.application'
    id 'maven-publish'
}

// ç¬¬ä¸€ä¸ª AAR
publishing {
    publications {
        adSdk(MavenPublication) {
            groupId = 'com.zhaixin'
            artifactId = 'adsdk'
            version = '2.6.0'
            artifact("app/libs/AdSdk-2.6.0.aar")
        }

        // å¯ä»¥æ·»åŠ æ›´å¤š AAR
        anotherLib(MavenPublication) {
            groupId = 'com.zhaixin'
            artifactId = 'adgain-sdk'
            version = '4.2.3.2'
            artifact("app/libs/adgain-sdk-4.2.3.2.aar")
        }
    }
}

android {
    compileSdkVersion 31
    buildToolsVersion "30.0.3"

    defaultConfig {
        applicationId "com.lockin.loock"
        minSdkVersion 24
        targetSdkVersion 31
        versionCode 1
        versionName "1.0"
    }

    buildTypes {
        debug {
            minifyEnabled false
            signingConfig signingConfigs.debug
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
        release {
            minifyEnabled false
            signingConfig signingConfigs.debug
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    //ç­¾åé…ç½®
    signingConfigs {
        debug {
            storeFile file('../app/src/main/jks/weather.jks')
            storePassword '123456'
            keyAlias 'weather'
            keyPassword '123456'
        }

    }
}

dependencies {
    implementation 'androidx.appcompat:appcompat:1.0.0'
    implementation 'androidx.recyclerview:recyclerview:1.0.0'
    implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0'
    implementation 'androidx.cardview:cardview:1.0.0'
    implementation 'com.github.gzu-liyujiang:Android_CN_OAID:4.2.4'

    //ç¾æ•°
    //è„‰ç›Ÿ
    implementation 'com.squareup.okhttp3:okhttp:4.12.0'
    implementation 'com.squareup.okio:okio:3.6.0'
    implementation "com.android.support.constraint:constraint-layout:2.0.4"
    implementation 'com.google.code.gson:gson:2.8.6'

    //å¤šç›Ÿ
    implementation 'com.github.bumptech.glide:glide:4.12.0'
    implementation 'com.google.protobuf:protobuf-java:4.27.5'
    implementation 'com.tencent.mm.opensdk:wechat-sdk-android:6.8.0'


    //æƒŠé¸¿åŠ¨èƒ½
    implementation "com.huawei.hms:ads-lite:13.4.78.301"
    implementation fileTree(include: ['*.jar','*.aar'], dir: 'libs')
    implementation 'androidx.legacy:legacy-support-v4:1.0.0'

    //é£æ¢­
    implementation "com.google.guava:guava:31.0.1-android"

    implementation 'com.google.android.material:material:1.6.0'
    implementation 'androidx.viewpager2:viewpager2:1.0.0'


}
///// =============== ä¿®æ­£çš„ POM ç”Ÿæˆè„šæœ¬ ===============
//task generateAdSdkPom {
//    doLast {
//        def groupId = 'com.zhuocloud'
//        def artifactId = 'adsdk'
//        def version = '2.6.0'
//
//        // ä¿®æ­£ï¼šä½¿ç”¨å•å¼•å·é¿å…å­—ç¬¦ä¸²æ’å€¼é—®é¢˜
//        def pomContent = '''<?xml version="1.0" encoding="UTF-8"?>
//<project>
//  <modelVersion>4.0.0</modelVersion>
//  <groupId>com.zhuocloud</groupId>
//  <artifactId>adsdk</artifactId>
//  <version>2.6.0</version>
//  <packaging>aar</packaging>
//</project>'''
//
//        // ç”Ÿæˆåˆ°é¡¹ç›®æ ¹ç›®å½•çš„ generated-pom æ–‡ä»¶å¤¹
//        def pomDir = file("${project.rootDir}/app/libs")
//        pomDir.mkdirs()
//        def pomFile = file("${pomDir}/AdSdk-${version}.pom")
//        pomFile.text = pomContent
//
//        println "âœ… ç”Ÿæˆ: AdSdk-${version}.pom"
//        println "ğŸ“ æ–‡ä»¶ä½ç½®: ${pomFile.absolutePath}"
//        println "ğŸ“ ä¸Šä¼ åˆ°Gitee: maven/com/zhuocloud/adsdk/${version}/"
//        println "ğŸ”— ä¾èµ–é…ç½®: implementation '${groupId}:${artifactId}:${version}'"
//    }
//}
//
//task checkAdSdkAar {
//    doLast {
//        def aarFile = file('libs/AdSdk-2.6.0.aar')
//        if (aarFile.exists()) {
//            println "âœ… AAR æ–‡ä»¶å­˜åœ¨: ${aarFile.name}"
//            println "ğŸ’¡ ä¸Šä¼ æ—¶éœ€è¦é‡å‘½åä¸º: adsdk-2.6.0.aar"
//        } else {
//            println "âŒ AAR æ–‡ä»¶ä¸å­˜åœ¨: ${aarFile.name}"
//        }
//    }
//}
//
//task setupAdSdkRemote {
//    dependsOn 'checkAdSdkAar', 'generateAdSdkPom'
//    doLast {
//        println "ğŸ‰ æ‰€æœ‰å‡†å¤‡å·¥ä½œå®Œæˆï¼è¯·æŒ‰ç…§æŒ‡å¼•ä¸Šä¼ æ–‡ä»¶åˆ°Gitee"
//    }
//}
//// =============== è„šæœ¬ç»“æŸ ===============